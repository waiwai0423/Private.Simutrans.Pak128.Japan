# Simutrans.Pak128.Japan
私家版pak128.japan改良版

最新のsimutrans本体でvanillaのpak128.japanをプレイしたところ、以前から有った致命的な不具合がどうしても気になってしまいましたので、
私的な改良版を作成することにしました。
以前に作ったものですが2024年6月現在忘れていることが多く、関心も薄れているので、どなたかもらってくださると嬉しいです。どうぞforkしてご利用ください。

この私家版は本家pak128.japanの最新版120.0のソースが公開されていないので、ソースの公開されている112.0をベースに開発しております。
120.0へのファイル上書きという形で提供されます。
なお、現在開発中のためソースのみ公開としています。

このパッチは以下の機能を提供します。

a.致命的な不具合の修正
以下のものが含まれます。
1.時速30kmまでの道路にしか踏切を設置出来なかった物を60kmにまで緩和
2.消費する産業がなく詰まりの原因となる材木を炭鉱で消費するように変更
3.同様に米(小口混載)の消費先として米屋を新設
4.同様に野菜(小口混載)の消費先として八百屋を新設

b.儲からない貨物運賃をJR貨物の隅田川-札幌貨物ターミナル間約1200kmの運賃をベースに値上げ

c.産業のバランス改善
入出力のバランスが悪くどんなに運んでもすぐ消費する、あるいは必要以上に生産されるといった産業の入出力のバランスを変更

d.既存カテゴリの活用
上記の産業の修正と併せて存在はするがほぼ使用されていないcat4(国鉄12ftコンテナ)を使用するように産業を修正

説明
a-1に関してはsimutrans本体の最新版により踏切の仕様が厳格化したため、datでは道路が最高30km/線路130kmと記載されていた物が有効となっていたことが原因でした。
60kmまでというのは2023年1月1日現在日本国に存在する踏切の最高速が道路側60kmまどとなっているからです。
時速70km以上の道路もありますが、制限を緩和する条件として踏切の立体交差化が含まれているため、一般道の最高速の60kmまでとしました。
線路の方は以前から130kmで変更はありません。
山形新幹線・秋田新幹線の独自区間内にも踏切があり、ミニ新幹線の規格として最高速が130kmでしたので、変更の必要はないと判断しています。
これ以上の速度を求めるのであれば、それはアドオン/MODの範疇かと考えます。

a-2,3,4に関しては行き場のない貨物が生産され続け、生産の限界を超えてしまうとどんなに荷物を運んでも生産がストップしてしまい、
ゲームの「詰まり」が起きていたことへの対処として、消費する産業を設定することにしました。
炭鉱は以前から「木材」(ややこしいので要注意！)を消費していましたが、「材木」に切り替えることで詰まりを解消。
米屋と八百屋はソース上にだけ存在し、グラフィックも適当なものがあてがわれており、作りかけといった感じでした。
幸いなことに、未使用の使えそうなグラフィックが1つだけありましたので、この2つに割り当てております。
私自身ドット絵は描けませんので、既存の物でご勘弁ください。

bは私が以前作成したpak128.japan拡張キットvol.1で採用した物をほぼそのまま使用したものです。
説明がなく基準のわからなかった貨物運賃を全面的に見直し、JR貨物が採用する1tに付きいくら、という重量ベースでの設定を基本とし、
割り増し設定に該当する貨物はJR貨物の規定通りの割合でさらに増額しています。
これにより貨物は大分儲けやすくなっているかと思います。

ここまで来るとやる気が出てきてcとdもやりたくなってきたので改良に手を付けています。
入力と出力の各貨物に設定された割合に関しては基準を作って比率を決めております。
入力と出力で決定方法を変えており、出力に関しては小口混載10000個をどう振り分けるかをベースに考えております。
これも、以前製作した拡張キットvol.1のgoodsの定義見直しを使用してバランスを調整しています。
12ftコンテナ1個(cat4)＝パレット6枚(cat3)=パレット1枚につき小口混載800kmまで積載X6
12ftコンテナは貨物積載状態で1個あたり総重量5t、うちc20コンテナが自重1.0tでしたので、貨物が4tまで積載可能とし、
これに合わせるため12ftコンテナにパレット6枚搭載するとパレット1枚800kgとするのが妥当、としたのが拙作でした。

